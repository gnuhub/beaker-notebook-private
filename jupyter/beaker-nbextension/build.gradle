def windows() {
  return System.getProperty('os.name').contains('Windows')
}

def winOrUnix(Object... args) {
  if (windows()) {
    return (['cmd', '/c'] << args).flatten()
  }
  else {
    return args
  }
}

task install() {
  doLast {
    exec {
      commandLine(*(winOrUnix('pip', "install", "-e", ".")))
    }
    exec {
      commandLine(*(winOrUnix("jupyter", "nbextension", "install", "--py", "--symlink", "--sys-prefix", "beaker-nbextension")))
    }
    exec {
      commandLine(*(winOrUnix("jupyter", "nbextension", "enable", "--py", "--sys-prefix", "beaker-nbextension")))
    }
    project('js').tasks.install.execute()
  }
}